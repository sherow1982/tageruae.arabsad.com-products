<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>منتجات تاجر الإمارات</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="تصفح منتجات تاجر الإمارات بسرعة وسهولة. كل المنتجات محدثة مباشرة من EasyOrders.">
<meta name="keywords" content="تاجر الإمارات, منتجات, EasyOrders, تسوق, درهم إماراتي">
<meta name="robots" content="index, follow">

<!-- Open Graph -->
<meta property="og:title" content="منتجات تاجر الإمارات">
<meta property="og:description" content="تصفح منتجات تاجر الإمارات مباشرة من EasyOrders">
<meta property="og:type" content="website">
<meta property="og:url" content="https://sherow1982.github.io/tageruae.arabsad.com/">
<meta property="og:image" content="رابط_صورة_افتراضية_او_شعار.png">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="منتجات تاجر الإمارات">
<meta name="twitter:description" content="تصفح منتجات تاجر الإمارات مباشرة من EasyOrders">
<meta name="twitter:image" content="رابط_صورة_افتراضية_او_شعار.png">

<link rel="preload" as="style" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css">
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

<style>
body { font-family: 'Tajawal', sans-serif; background-color: #f9fafb; margin:0; padding:0; }
h1 { text-align:center; font-size:2rem; color:#1D4ED8; margin:20px 0; }

#products {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 20px;
  padding: 20px;
}

.card { background:#fff; border-radius:10px; box-shadow:0 0 10px rgba(0,0,0,0.1); transition: transform 0.3s, box-shadow 0.3s; display:flex; flex-direction:column; height:100%; overflow:hidden; position:relative; }
.card:hover { transform: translateY(-5px); box-shadow:0 15px 30px rgba(0,0,0,0.2); }

.card img { width:100%; height:auto; max-height:250px; object-fit:contain; border-radius:10px 10px 0 0; cursor:pointer; opacity:0; transition: opacity 0.8s ease-in-out; }
.card img.loaded { opacity:1; }

.card-content { padding:10px; display:flex; flex-direction:column; justify-content:flex-start; flex-grow:1; transition: transform 0.3s; }
.card:hover .card-content { transform: translateY(-5px); }

.title { font-weight:bold; font-size:1rem; color:#444; text-align:center; margin-bottom:5px; }

.price-fixed { font-weight:bold; text-align:center; font-size:1.2rem; color:#006400; margin-bottom:5px; }

.btn { text-align:center; padding:8px; border-radius:8px; font-weight:bold; text-decoration:none; display:block; margin-top:5px; background: #00BFFF; color:#fff; transition:0.3s; }
.btn:hover { background:#009ACD; }

/* WhatsApp floating button */
#whatsapp-btn { position: fixed; bottom: 20px; right: 20px; background:#fff; color:#8B0000; font-weight:bold; font-size:0.9rem; padding:10px 14px; border-radius:50px; display:flex; align-items:center; justify-content:center; box-shadow:0 4px 10px rgba(0,0,0,0.2); z-index:1000; transition:transform 0.3s, box-shadow 0.3s; cursor:pointer; text-decoration:none; }
#whatsapp-btn:hover { transform: scale(1.1); box-shadow:0 8px 20px rgba(0,0,0,0.3); }
#whatsapp-btn svg { width:20px; height:20px; fill:#25D366; margin-left:5px; }

@media (max-width:768px){ .card img{max-height:200px;} .price-fixed{font-size:1.1rem;} }
@media (max-width:480px){ .card img{max-height:150px;} .title{font-size:0.9rem;} .price-fixed{font-size:1rem;} }
</style>
</head>
<body>

<h1>منتجات تاجر الإمارات</h1>
<div id="products">
  <p class="text-center text-gray-500">جاري تحميل المنتجات...</p>
</div>

<a href="https://wa.me/201110760081" target="_blank" id="whatsapp-btn">
  راسلنا واتساب
  <svg viewBox="0 0 448 512"><path d="M380.9 97.1C339-8.4 229.2-20.5 153.3 31.2 109.8 60.3 79.8 105.2 72.1 154.7 64.3 204.1 79.6 252 109.1 293.1L84.3 424.7 214.7 399.9C256 414.3 302.7 408 342.9 381.5 404.2 345.1 432.3 278.2 424.6 212.2 417 146.1 386.5 91.3 380.9 97.1ZM224 272C190.1 272 160 241.9 160 208S190.1 144 224 144s64 30.1 64 64-30.1 64-64 64Z"/></svg>
</a>

<script>
const FEED_URL="https://api.easy-orders.net/api/v1/products/feed/437a38bb829245a3934e1d2fe153b417/channel/google";

function cleanText(text){return text? text.replace(/[*•\-\u00A0]/g,"").trim() : "";}

async function loadProducts(){
  try{
    const res=await fetch(FEED_URL);
    const text=await res.text();
    const parser=new DOMParser();
    const xml=parser.parseFromString(text,"application/xml");
    const items=xml.querySelectorAll("item");
    const container=document.getElementById("products");
    container.innerHTML="";

    const fragment=document.createDocumentFragment();
    const jsonLDProducts=[];

    items.forEach((item,i)=>{
      const title=cleanText(item.querySelector("title")?.textContent)||"منتج بدون اسم";
      const link=item.querySelector("link")?.textContent||"#";
      const image=item.querySelector("g\\:image_link, image_link")?.textContent||"";
      const priceAfter=parseFloat((item.querySelector("g\\:price, price")?.textContent||"0").replace(/[^\d.]/g,""))||0;

      const card=document.createElement("div"); card.className="card";

      const aImg=document.createElement("a"); aImg.href=link; aImg.target="_blank";
      const img=document.createElement("img"); img.src=image; img.alt=title; img.loading="lazy";
      img.addEventListener('load',()=>img.classList.add('loaded'));
      aImg.appendChild(img);
      card.appendChild(aImg);

      const content=document.createElement("div"); content.className="card-content";
      const t=document.createElement("div"); t.className="title"; t.textContent=title;
      const pNew=document.createElement("div"); pNew.className="price-fixed"; pNew.textContent=priceAfter+" درهم";
      const btn=document.createElement("a"); btn.className="btn"; btn.href=link; btn.target="_blank"; btn.textContent="اشترِ الآن";

      content.appendChild(t); content.appendChild(pNew); content.appendChild(btn);
      card.appendChild(content);
      fragment.appendChild(card);

      jsonLDProducts.push({
        "@type":"Product",
        "name": title,
        "image": image,
        "offers":{
          "@type":"Offer",
          "priceCurrency":"AED",
          "price": priceAfter,
          "url": link,
          "availability":"https://schema.org/InStock"
        }
      });
    });

    container.appendChild(fragment);

    // JSON-LD SEO
    const scriptLD=document.createElement("script");
    scriptLD.type="application/ld+json";
    scriptLD.text=JSON.stringify({
      "@context":"https://schema.org",
      "@type":"ItemList",
      "itemListElement":jsonLDProducts.map((prod,i)=>({"@type":"ListItem","position":i+1,"item":prod}))
    });
    document.head.appendChild(scriptLD);

  }catch(err){
    console.error(err);
    document.getElementById("products").innerHTML="<p class='text-center text-red-500'>فشل تحميل المنتجات من الفييد مباشرة.</p>";
  }
}

loadProducts();
</script>

</body>
</html>
